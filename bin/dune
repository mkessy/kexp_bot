(executable
 (name main)
 (modules main)
 (libraries dream tyxml caqti-driver-sqlite3 kexp_bot kexp_bot.api kexp_bot.db)
 (preprocess (pps ppx_deriving_yojson lwt_ppx ppx_deriving.show)) 
 )


(executable
 (name update_programs)
 (modules update_programs)
 (libraries caqti-driver-sqlite3 kexp_bot kexp_bot.ingest)
 (preprocess (pps ppx_deriving_yojson )) 
 )

(executable
 (name update_shows)
 (modules update_shows)
 (libraries caqti-driver-sqlite3 kexp_bot kexp_bot.ingest)
 (preprocess (pps ppx_deriving_yojson )) 
 )


(executable
 (name update_plays)
 (modules update_plays)
 (libraries caqti-driver-sqlite3 kexp_bot kexp_bot.ingest)
 (preprocess (pps ppx_deriving_yojson )) 
 )

(rule
  (target kexp.sqlite)
  (deps ../kexp.sqlite)
  (action (copy %{deps} %{target})))